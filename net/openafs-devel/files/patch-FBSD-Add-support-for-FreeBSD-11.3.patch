From e8fa417d72addfb23ce10e71b8c5b258dce54059 Mon Sep 17 00:00:00 2001
From: Andrew Deason <adeason@dson.org>
Date: Sun, 18 Aug 2019 19:59:50 -0500
Subject: [PATCH] FBSD: Add support for FreeBSD 11.3

Change-Id: Ibe3496f06da83a0b30182ea92081bae41fe766f3
---
 src/config/afs_sysnames.h         |  2 ++
 src/config/param.amd64_fbsd_113.h | 47 +++++++++++++++++++++++++++++++
 2 files changed, 49 insertions(+)
 create mode 100644 src/config/param.amd64_fbsd_113.h

diff --git src/config/afs_sysnames.h src/config/afs_sysnames.h
index 8f7feec7b..b973ddf20 100644
--- src/config/afs_sysnames.h
+++ src/config/afs_sysnames.h
@@ -238,6 +238,7 @@
 #define SYS_NAME_ID_i386_fbsd_110      2140
 #define SYS_NAME_ID_i386_fbsd_111      2141
 #define SYS_NAME_ID_i386_fbsd_112      2142
+#define SYS_NAME_ID_i386_fbsd_113      2143
 #define SYS_NAME_ID_i386_fbsd_120      2160
 
 #define SYS_NAME_ID_ia64_linux2		2200
@@ -352,6 +353,7 @@
 #define SYS_NAME_ID_amd64_fbsd_110     3040
 #define SYS_NAME_ID_amd64_fbsd_111     3041
 #define SYS_NAME_ID_amd64_fbsd_112     3042
+#define SYS_NAME_ID_amd64_fbsd_113     3043
 #define SYS_NAME_ID_amd64_fbsd_120     3060
 
 #define SYS_NAME_ID_amd64_w2k           3400
diff --git src/config/param.amd64_fbsd_113.h src/config/param.amd64_fbsd_113.h
new file mode 100644
index 000000000..44b0e7f5e
--- /dev/null
+++ src/config/param.amd64_fbsd_113.h
@@ -0,0 +1,47 @@
+#ifndef	AFS_PARAM_H
+#define	AFS_PARAM_H
+
+/* Machine / Operating system information */
+#define SYS_NAME	"amd64_fbsd_113"
+#define SYS_NAME_ID	SYS_NAME_ID_amd64_fbsd_113
+
+#define AFS_64BITPOINTER_ENV 1
+
+#ifndef UKERNEL
+/* This section for kernel libafs compiles only */
+
+#define AFS_64BITUSERPOINTER_ENV 1
+
+#define AFS_FBSD101_ENV 1
+#define AFS_FBSD102_ENV 1
+#define AFS_FBSD103_ENV 1
+#define AFS_FBSD110_ENV 1
+#define AFS_FBSD111_ENV 1
+#define AFS_FBSD112_ENV 1
+#define AFS_FBSD113_ENV 1
+
+#define AFS_X86_FBSD101_ENV 1
+#define AFS_X86_FBSD102_ENV 1
+#define AFS_X86_FBSD103_ENV 1
+#define AFS_X86_FBSD110_ENV 1
+#define AFS_X86_FBSD111_ENV 1
+#define AFS_X86_FBSD112_ENV 1
+#define AFS_X86_FBSD113_ENV 1
+
+#else /* !defined(UKERNEL) */
+
+/* This section for user space compiles only */
+
+#define AFS_USR_FBSD101_ENV 1
+#define AFS_USR_FBSD102_ENV 1
+#define AFS_USR_FBSD103_ENV 1
+#define AFS_USR_FBSD110_ENV 1
+#define AFS_USR_FBSD111_ENV 1
+#define AFS_USR_FBSD112_ENV 1
+#define AFS_USR_FBSD113_ENV 1
+
+#endif /* !defined(UKERNEL) */
+
+#define USE_UCONTEXT
+
+#endif /* AFS_PARAM_H */
-- 
2.23.0

